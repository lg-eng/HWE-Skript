{
  "hash": "4c25bc69188d8e352e0ab009ca009b69",
  "result": {
    "markdown": "# Leistungsverstärker\n\n::: {.cell execution_count=1}\n``` {.python .cell-code code-fold=\"true\"}\n#import sys\n# adding Folder_2 to the system path\n#sys.path.insert(0, '../../../Common/QuartoBookHelpers')\n#import QuartoBookHelpers\n\nfrom IPython.display import Markdown, Latex\n\nfrom sympy import *\nimport sympy.physics.units as u\nimport numpy as np\nfrom matplotlib import pyplot as plt\nfrom quantiphy import Quantity\nimport re\n\nclass MySymbol(Symbol):\n    def __new__(cls, name, description='',unit='',value=''):\n        obj = Symbol.__new__(cls, name)\n        obj.description = description\n        obj.unit = unit\n        obj.value = value\n        \n        return obj\n\nclass MyFunction(Function):\n    def __new__(cls, name, description='',unit='',value=''):\n        obj = Function.__new__(cls, name)\n        obj.description = description\n        obj.unit = unit\n        obj.value = value\n        \n        return obj\n        \nclass QBookHelpers():\n    def print_description(dic):\n        for vari in dic:\n            display(Markdown(f'${latex(vari)}$' + ' ... ' + vari.description))\n            \n    def print_equation(eq,**kwargs):\n        #print(kwargs)\n        if kwargs != {}:\n            label = kwargs['label']\n            #print(label)\n            display(Markdown(f'$$\\n{latex(eq)}\\n$${{#' + label + f'}}'))\n        else:      \n            display(Markdown(f'$$\\n{latex(eq)}\\n$${{#eq-Dummy}}'))\n            \n    def print_values(dic,**kwargs):\n        for vari in dic:\n            try:\n                QuantValue = Quantity(vari.value,str(vari.unit.abbrev))\n            except:\n                QuantValue = Quantity(vari.value)\n            \n            quant_string = QuantValue.render(prec=2)\n            val = quant_string.split(' ')[0]\n            if quant_string[-1].isdigit():\n                uni = ''\n            else:\n                try:\n                    uni = quant_string.split(' ')[1]\n                except:\n                    uni = quant_string[-1]\n            #print(re.split('(\\d+)',QuantValue.render(prec=2)))\n            #uni = re.split('(\\d+)',QuantValue.render(prec=2))[-1]\n            #uni = ''\n            #val = re.split('(\\d+)',QuantValue.render(prec=2))[1]\n            #val = QuantValue.render(prec=2)\n\n            if uni.find('ohm') >=0:\n                uni = '\\ \\mathrm{' + uni.replace('ohm','\\Omega') + '}'\n                disp_string = f'$${latex(vari)}' + ' = ' + latex(val) + ' ' + str(uni) + f'$$' \n            else:\n                disp_string = f'$${latex(vari)}' + ' = ' + latex(val) + ' \\ ' + latex(uni) + f'$$' \n            \n            if kwargs != {}:\n                label = kwargs['label']\n                disp_string = disp_string + f'{{#' + label + f'}}'\n\n            \n            display(Markdown(disp_string))\n\n            #display(Markdown(f'${latex(vari)}$' + ' = ' + str(vari.value) + f'$\\ {latex(vari.unit)}$' ))            \n            #display(Markdown(f'${latex(vari)}$' + ' = ' + str(\"%.2f\" % round(vari.value, 2)) + f'$\\ {latex(vari.unit)}$' ))\n            #display(Markdown(f'$${latex(vari)}' + ' = ' + latex(QuantValue.render()) + f'$$' ))\n            #display(Markdown(f'$${latex(vari)}' + ' = ' + latex(quant) + f'$$' ))\n            #display(Markdown(f'$${latex(vari)}' + ' = ' + str(vari.value) + f'\\ {latex(vari.unit)}$$' ))\n\n            \n    def calculate_num_value(eqn):\n        replacement = {}\n        for sym in eqn.rhs.free_symbols:\n            case = {sym:sym.value}\n            replacement.update(case)\n        #print(replacement)\n        #return Eq(eqn.lhs,eqn.rhs.evalf(subs=replacement))\n        eqn.lhs.value = eqn.rhs.evalf(subs=replacement)\n        #display(eqn.lhs.value)\n\n    def logic_parser(eqn):\n        return str(eqn).replace('&','and').replace('|','or').replace('~','not')\n\n```\n:::\n\n\n**Lernziele**  \n\n* Auslegung von analogen Schaltungen  \n* Strukturiertes aufbereiten einer Aufgabenstellung  \n* Plausibilität und Qualitätsbeurteilung mittels Simulation  \n* Übersichtliches zeichnen komplexer Schaltpläne  \n* Strukturiertes, Zeitoptimiertes Dokumentieren der Arbeit  \n\n\nTransistorverstärker, wie sie bisher bekannt sind @sec-BJT, in denen ein Transistor in einem Arbeitspunkt betrieben wird, haben bei höheren Leistungen eine zu hohe Verlustleistung. Die Verlustleistung ist proportional zum Strom durch den Kollektor $I_C$ in Ruhe, also ohne Signal am Eingang.\nBei der Emitterschaltung ist der Ruhestrom höher, da der Arbeitspunkt auf der Kennlinie weiter \"oben\" ist. Diese Betriebsart wird auch A - Betrieb genannt.\n\n![Bipolartransistor Arbeitspunkt und Ruhestrom @BJT_Kennlinie](Grafiken/BJT_Kennlinie_AP_Ruhestrom.png){#fig-BJT-AP_Ruhestrom}\n\nUm höhere Leistungen und eine geringere Verlustleistung zu erreichen, muss der Arbeitspunkt nach \"unten\" also zu einem kleineren $I_C$ gebracht werden. Wird dies am Beispiel des Verstärkers in Emittergrundschaltung @sec-BJT gemacht, würde das bedeuten, dass nur noch eine Halbwelle verstärkt wird. Um dies zu verhindern, werden ein PNP und ein NPN Transistor in Gegentakt geschaltet. Jeder Transistor übernimmt nun die Verstärkung einer Halbewelle. Warum der $I_C$, und damit die Verlustleistung, trotzdem nicht ganz Null sein kann, sehen wir im folgenden Teil.\n\n## Die Gegentaktendstufe\nUm zu vermeiden, dass der Arbeitspunkt eine höhere Verlustleistung aufgrund eines höheren $I_C$ verursacht, und trotzdem ein symmetrisches Signal verstärkt werden kann, können zwei Transistoren eingesetzt werden.\nDamit ist auch die maximale Leistung höher, da der Arbeitsbereich pro Transistor besser ausgenutzt wird. Ein Transistor verstärkt die positiven Signale. Der andere die negativen. Dies wird Gegentaktendstufe genannt und die die Betriebsart wird als B bezeichnet.\nWird eine reale Schaltung entwickelt ist stets darauf zu achten, dass die Bauteileigenschaften berücksichtigt werden. Speziell die Maximalwerte dürfen nicht überschritten werden.\n\n![Bipolartransistoren in Gegentakt ](Grafiken/01_LV_Gegentaktendstufe.png){#fig-BJT_Gegen}\n\n\nWird diese Schaltung einem Test unterzogen zeigt sich, dass das Ergebnis wenig zufriedenstellend ist. Weder wird die Amplitude erreicht, das Signal wird gedämpft, noch folgt der Ausgang dem sinuiden Verlauf des Eingangs. Speziell an den Nulldurchgängen gibt es beträchtliche Verzerrungen. Als Qualitätskriterium soll von nun an die Differenz zwischen Ausgangsspannung und Eingangsspannung herangezogen werden.\n\n![Bipolartransistoren in Gegentakt, Simulationsergebnisse ](Grafiken/01_GegentaktendstufeSimulation.png){#fig-BJT_Gegen_Sim1}\n\n| Simulationsparameter | Wert | Bemerkung |\n|----------------------|:-------:|:------:|\n| $V_{in}$ Frequenz         | 1 kHz  |        |   \n| $V_{in}$ Amplitude        | 1 V     |        |  \n| Simulierte Perioden  | 3       |        |     \n\n\n## Rückkopplung\nUm den Verlauf der Ausgangsspannung an den Verlauf der Eingangsspannung anzupassen, wird eine Gegenkopplung verwendet. Dazu ist eine Subtraktion des Ausgangssignals vom Eingangssignal notwendig. Als Transistorschaltung würde sich eine Differenzverstärkerschaltung anbieten. Für ein noch besseres Ergebnis wird hier ein OPV eingesetzt. Durch die Rückkopplung der gesamten Ausgangsspannung wird eine Spannungsverstärkung von Eins erreicht. Das Ausgangssignal folgt dem Eingangssignal. \nEine legitime Frage ist, warum nicht einfach nur der OPV verwendet wird? Hier kann auf die Überschrift verwiesen werden. Es soll Leistung verstärkt werden. Und die Ausgangsleistung eines OPV reicht in der Regel nicht aus um beispielsweise Lautsprecher zu betreiben.\n\n![Gegentaktendstufe mit Rückkopplung ](Grafiken/02_LV_Rueckkopplung.png){#fig-BJT_GegenRueck}\n\nMittels Simulation kann nun erneut die Qualität überprüft werden. Es ist zu erkennen, dass die Amplitude erreicht wird. An den Nulldurchgängen sind jedoch noch Störungen zu sehen. Die Ursache dieser Störungen sind die Kennlinien der Transistoren. In Abbildung @fig-BJT-AP_Ruhestrom lässt sich erkennen, dass sich in der Nähe des Ursprunges ein Knick befindet. Erst ab einer $U_{BE} \\ $ größer von ca. $0,7 \\ \\mathrm{V}$  beginnt der Transistor zu leiten. Das bedeutet, dass Eingangssignale kleiner als diese minimal notwendige Basis- Emitterspannung nicht verstärkt werden.  \nDer OPV wirkt zwar auch den Übergabeverzerrungen entgegen, allerdings ist er stark abhängig von der Frequenz. Je schneller im Verhältnis zum Signal der OPV sein Ausgangssignal ändern kann, umso kleiner sind die Verzerrungen. Wie schnell der OPV seinen Ausgang ändern kann, hängt von der Slew-Rate mit der Einheit $\\mathrm{\\frac{V}{s}}$ ab.\n\n![Gegentaktendstufe mit Rückkopplung, Simulationsergebnisse ](Grafiken/02_Rueckkopplung_Sim12.png){#fig-BJT_GegenRueck}\n\n| Simulationsparameter | Wert | Bemerkung |\n|----------------------|:-------:|:------:|\n| $V_{in}$ Frequenz         | 10 kHz  |        |   \n| $V_{in}$ Amplitude        | 1 V     |        |  \n| Simulierte Perioden  | 3       |        |    \n\n\n## Vorspannen {#sec-LV_Vorspannen}\nUm die Übergabeverzerrungen zu eliminieren wird die B-E Strecke vorgespannt. Das bedeutet eine Spannung anzulegen welche größer ist als die Schwellspannung der Basis- Emitter Strecke. Damit ist der Transistor bereits im leitenden Bereich und wird nur noch vom Eingangssignal weiter ausgesteuert.  \nDa durch das Vorspannen auch ein Kollektorstrom durch den Transistor fließt wenn am Eingang $0 \\ \\mathrm{V} \\ $ anliegen erhöhen sich die Verluste. Dieser Kollektorstrom wird auch als Ruhestrom bezeichnet $I_{C,Ruhe} \\ $. Um den Ruhestrom möglichst klein zu halten muss die Spannungsquelle an die Transistoren und deren Fertigungstoleranzen angepasst werden. \n\n![Gegentaktendstufe mit vorgespannten Transistoren ](Grafiken/03_LV_Vorspannung.png){#fig-BJT_GegenRueckVor}\n\nMittels DC-Sweep kann die Spannungsquelle auf einen gewünschten $I_C$ eingestellt werden. Der $I_C$ ist so zu wählen, dass der Arbeitspunkt außerhalb des nichtlinearen Bereichs der Transistorkennlinie liegt. Gleichzeitig soll er so klein als Möglich sein um die Verluste gering zu halten. Hier soll der $I_C$ ein Zehntel des maximalen Laststromes betragen.\n![Gegentaktendstufe mit vorgespannten Transistoren, DC-Sweep ](Grafiken/03_Vorspannung_DCSweepSim12.png){#fig-BJT_GegenRueckVorDCSw}\n\n| Simulationsparameter | Wert | Bemerkung |\n|----------------------|:-------:|:------:|\n| $V_{vor}$ min         | 1,2 V  |        |   \n| $V_{vor}$ max        | 1,4 V     |        |  \n| $V_{vor}$ step size  | 1 mV       |        | \n\nMit dem Cursor können die Ergebnisse exakt abgelesen werden.  \n\n| Simulationsergebnis | Wert | Bemerkung |\n|----------------------|:-------:|:------:|\n| $V_{vor}$ bei $I_C$ = 15 mA an T1        | 1,3479  V  |        |   \n| $V_{vor}$ bei $I_C$ = 15 mA an T2       | 1,3489  V     |        |  \n\nDa es sich um unterschiedliche Transistoren handelt, ist natürlich auch der Zusammenhang zwischen $U_{BE}$ und $I_C$ ein anderer. Da die Werte sehr nahe beieinander liegen kann ein gerundetes arithmetisches Mittel als Ergebnis für $V_{Vor}$ verwendet werden.\n\n\n\n\nDer Verstärker hat nun eine Qualität, welche das Verstärken von niederfrequenten Signalen in ausreichender Güte erlaubt, um Beispielsweise Musik zu verstärken. Dies ist am geringen Unterschied zwischen der Eingangsspannung und der Ausgangsspannung zu erkennen. \n\n![Gegentaktendstufe mit vorgespannten Transistoren, Simulationsergebnisse ](Grafiken/03_Vorspannung_Sim1.png){#fig-BJT_GegenRueckVorSim1}\n\n| Simulationsparameter | Wert | Bemerkung |\n|----------------------|:-------:|:------:|\n| $V_{in}$ Frequenz         | 10 kHz  |        |   \n| $V_{in}$ Amplitude        | 1 V     |        |  \n| Simulierte Perioden  | 3       |        |   \n\n::: {.callout-note}\nWelche anderen Darstellungen des Verhältnisses zwischen Ausgang und Eingang würden sich eignen um Nachzuweisen, dass die Verzerrung akzeptabel ist?\n:::\n\n## Reale Spannungsquelle\nIdeale Spannungsquellen, wie oben eingezeichnet, existieren nicht. Daher muss die ideale Spannungsquelle mit einer realen Spannungsquelle ersetzt werden. Aus kostengründen muss dies mit möglichst wenigen Bauteilen geschehen. Daher fällt ein Netzteil aus. Eine Schaltung mit nur drei Bauteilen die die Aufgabe erledigen kann ist ein sogenannter \"$U_{BE}$-Vervielfacher\" [@boehmer17, pp. 301].  \nIn @fig-BJT_GegenRueckVorReal wird die Schaltung gezeigt. Um die Schaltung zu dimensionieren kann der $U_{BE}$-Vervielfacher alleine betrachtet werden. $U_{out}$ ist aus  @sec-LV_Vorspannen bekannt. Es müssen nun also die Widerstände $R_{sq1}$ und $R_{sq2}$ so dimensioniert werden. \n\n![Reale Spannungsquelle, $U_{BE}$-Vervielfacher](Grafiken/04.01_LV_Reale_Vorspannung.png){#fig-BJT_GegenRueckVorReal2}\n\nDer Ablauf ist wie folgt und gilt für alle Dimensionierungsaufgaben von Schaltungen.  \n\n### $U_{BE}$-Vervielfacher berechnen. {#sec-ube_verf_bere}\nDabei wird die Schaltung analytisch, also mit Formeln berechnet.  \nEs soll wie bei der Dimensionierung der Emitterverstärkerschaltung klar gekennzeichnet werden woher die Formeln und Werte kommen.  \nGesucht wird $R_{sq1}$ und $R_{sq2}$ so, dass $U_{out}$ der gesuchten Vorspannung aus  @sec-LV_Vorspannen entspricht.\n\n::: {.cell execution_count=3}\n\n::: {.cell-output .cell-output-display}\n$$U_{out} = \\mathtt{\\text{1.35}} \\ \\mathtt{\\text{V}}$$\n:::\n:::\n\n\nDer maximale Laststrom $I_{Lmax}$ wurde in @sec-LV_Vorspannen bestimmt.\n\n::: {.cell execution_count=4}\n\n::: {.cell-output .cell-output-display}\n$$I_{Lmax} = \\mathtt{\\text{500}} \\ \\mathtt{\\text{uA}}$$\n:::\n:::\n\n\nDie Berechnung von Transistorschaltungen erfolgt immer mit gewissen Annahmen. Eine exaktere, und damit kompliziertere, Berechnung ist nicht sinnvoll, da die Bauteiltoleranzen und Temperatureinflüsse groß sind. Folgende *Faustegeln* gelten für die Berechnung:\n\n::: {.cell execution_count=5}\n\n::: {.cell-output .cell-output-display}\n$$\nI_{1} = I_{2} + I_{B}\n$${#eq-I1_eq}\n:::\n\n::: {.cell-output .cell-output-display}\n$$\nI_{B} = \\frac{I_{C}}{100}\n$${#eq-Ib_eq}\n:::\n\n::: {.cell-output .cell-output-display}\n$$\nI_{Spg} = 20 I_{Lmax}\n$${#eq-Ispg_eq}\n:::\n\n::: {.cell-output .cell-output-display}\n$$I_{Spg} = \\mathtt{\\text{10}} \\ \\mathtt{\\text{mA}}$$\n:::\n\n::: {.cell-output .cell-output-display}\n$$U_{BE} = \\mathtt{\\text{700}} \\ \\mathtt{\\text{mV}}$$\n:::\n:::\n\n\nMit Maschengleichung 1 $M_1$ erhält man den Zusammenhang zwischen $U_1$ und $U_{BE}$.\n\n::: {.cell execution_count=6}\n\n::: {.cell-output .cell-output-display}\n$$\n0 = - U_{2} + U_{BE}\n$${#eq-M1_eq}\n:::\n\n::: {.cell-output .cell-output-display}\n$$\nU_{2} = U_{BE}\n$${#eq-U2_eq}\n:::\n\n::: {.cell-output .cell-output-display}\n$$U_{2} = \\mathtt{\\text{700}} \\ \\mathtt{\\text{mV}}$$\n:::\n:::\n\n\nMit Maschengleichung 2 $M_2$ lässt sich $U_1$ berechnen.\n\n::: {.cell execution_count=7}\n\n::: {.cell-output .cell-output-display}\n$$\n0 = U_{1} + U_{2} - U_{out}\n$${#eq-M2_eq}\n:::\n\n::: {.cell-output .cell-output-display}\n$$\nU_{1} = - U_{2} + U_{out}\n$${#eq-U1_eq}\n:::\n\n::: {.cell-output .cell-output-display}\n$$U_{1} = \\mathtt{\\text{650}} \\ \\mathtt{\\text{mV}}$$\n:::\n:::\n\n\n$I_1$ kann aus dem Knoten 2 berechnet werden indem @eq-I2_eq eingesetz wird.\n\n::: {.cell execution_count=8}\n\n::: {.cell-output .cell-output-display}\n$$\n0 = I_{1} - I_{2} - I_{B}\n$${#eq-K2_eq}\n:::\n\n::: {.cell-output .cell-output-display}\n$$\nI_{1} = I_{2} + I_{B}\n$${#eq-I1_eq}\n:::\n\n::: {.cell-output .cell-output-display}\n$$\nI_{2} = 10 I_{B}\n$${#eq-I2_eq}\n:::\n\n::: {.cell-output .cell-output-display}\n$$\nI_{1} = 11 I_{B}\n$${#eq-I1_eq2}\n:::\n:::\n\n\nWird nun noch  @eq-Ib_eq in  @eq-I1_eq2 eingesetzt erhält man eine Gleich für $I_1$ in Abhängigkeit von $I_C$.\n\n::: {.cell execution_count=9}\n\n::: {.cell-output .cell-output-display}\n$$\nI_{1} = \\frac{11 I_{C}}{100}\n$${#eq-I1_eq3}\n:::\n:::\n\n\nÜber den Knoten 1 wird der Zusammenhang zwischen den Strömen dargestellt. Für $I_L$ muss der maximale Lastrom eingesetz werden. Dieser kann aus einer Transientensimulation in  @sec-LV_Vorspannen ermittelt werden. Der Strom $I_{spg}$ kann mit der Faustregel @eq-Ispg_eq bestimmt werden. Werden diese Informationen und  @eq-I1_eq3 in Knoten 1 @eq-K1_eq eingesetzt, kann durch umformen, $I_c$ berechnet werden. \n\n::: {.cell execution_count=10}\n\n::: {.cell-output .cell-output-display}\n$$\n0 = - I_{1} - I_{C} - I_{L} + I_{Spg}\n$${#eq-K1_eq}\n:::\n\n::: {.cell-output .cell-output-display}\n$$\n0 = - \\frac{111 I_{C}}{100} + 19 I_{Lmax}\n$${#eq-Ic_eq}\n:::\n\n::: {.cell-output .cell-output-display}\n$$\nI_{C} = \\frac{1900 I_{Lmax}}{111}\n$${#eq-Ic_eq2}\n:::\n\n::: {.cell-output .cell-output-display}\n$$I_{C} = \\mathtt{\\text{8.56}} \\ \\mathtt{\\text{mA}}$$\n:::\n:::\n\n\nDurch einsetzen der Zahlenwerte können nun $R_{sq1}$ und $R_{sq2}$ berechnet werden.\n\n::: {.cell execution_count=11}\n\n::: {.cell-output .cell-output-display}\n$$\nI_{B} = \\frac{I_{C}}{100}\n$${#eq-Ib_eq}\n:::\n\n::: {.cell-output .cell-output-display}\n$$I_{B} = \\mathtt{\\text{85.6}} \\ \\mathtt{\\text{uA}}$$\n:::\n\n::: {.cell-output .cell-output-display}\n$$\nI_{1} = 11 I_{B}\n$${#eq-I1_eq3}\n:::\n\n::: {.cell-output .cell-output-display}\n$$I_{1} = \\mathtt{\\text{941}} \\ \\mathtt{\\text{uA}}$$\n:::\n\n::: {.cell-output .cell-output-display}\n$$\nR_{sq1} = \\frac{U_{1}}{I_{1}}\n$${#eq-R1_eq}\n:::\n\n::: {.cell-output .cell-output-display}\n$$R_{sq1} = \\mathtt{\\text{690}} \\ \\mathrm{\\Omega}$$\n:::\n\n::: {.cell-output .cell-output-display}\n$$\nI_{2} = 10 I_{B}\n$${#eq-Dummy}\n:::\n\n::: {.cell-output .cell-output-display}\n$$I_{2} = \\mathtt{\\text{856}} \\ \\mathtt{\\text{uA}}$$\n:::\n\n::: {.cell-output .cell-output-display}\n$$\nR_{sq2} = \\frac{U_{2}}{I_{2}}\n$${#eq-R2_eq}\n:::\n\n::: {.cell-output .cell-output-display}\n$$R_{sq2} = \\mathtt{\\text{818}} \\ \\mathrm{\\Omega}$$\n:::\n:::\n\n\n::: {.callout-note}\nWird der Spannungsteiler aus $R_{sq1}$ und $R_{sq2}$ als unbelastet betrachtet, indem sichergestellt wird, dass $I_1 >> I_B$ ist, vereinfacht sich die Berechnung erheblich. Allerdings sind damit auch höhere Ruheströme und damit Verluste verbunden.\n:::\n\n### Überprüfen und einstellen mittels Simulation\nNun wird mittels Simulation die Berechnung überprüft und die Schaltung exakt eingestellt. Zur Überpürfung wird eine \"OP\" Simulation verwendet. Um die Schaltung einzustellen kann eine \"DC-Sweep\" Simulation, wie dies zum Beispiel in @sec-LV_Vorspannen zur Bestimmung der korrekten Vorspannung gemacht wurde, verwendet werden.\n\n![Reale Spannungsquelle, Simulation 1](Grafiken/04.01_LV_RealeSpannungsquelleSim1.png){#fig-BJT_LV_RealeSpannungsquelleSim1}\n\nWerden die oben berechneten Werte mittels Simulation überpürft, erhält man eine gute Übereinstimmung für $U_{out}$. Um eine noch Bessere Übereinstimmung zu erzielen können die Widerstände mittels DC-Sweep eingestellt werden. Dazu wird $R_{sq1}$ laut Berechnung gewählt und Widerstand $R_{sq2}$ \"gesweept\". Ziel ist es Den Widerstandswert $R_{sq2}$ so zu bestimmen, dass $U_{out}$ den notwendigen Wert der Vorspannung hat, welcher in  @sec-LV_Vorspannen mittels \"DC-Sweep\" ermittelt wurde $U_{out} = 1.35 \\ \\mathrm{V}$.\n\n![Reale Spannungsquelle, DC-Sweep](Grafiken/04.01_LV_RealeSpannungsquelleSim2.png){#fig-BJT_LV_RealeSpannungsquelleSim2}\n\n| Simulationsparameter | Wert | Bemerkung |\n|----------------------|:-------:|:------:|\n| Rsq2 Sweep Bereich         | 1 Ohm bis 20 kOhm in 100 Ohm Schritten | \n\n| Simulationsergebnis | Wert | Bemerkung |\n|----------------------|:-------:|:------:|\n| $R_{sq2}$ bei $U_{out} = 1,35 \\ \\mathrm{V}$        | $R_{sq2} = 774,11 \\ \\Omega$ |        |     \n\nEine neuerliche Simulation bestätigt das Ergebnis.\n\n\n![Reale Spannungsquelle, Simulation 2](Grafiken/04.01_LV_RealeSpannungsquelleSim3.png){#fig-BJT_LV_RealeSpannungsquelleSim3}\n\n\n### Aufbau\n Ist aus dem Schaltungsaufbau zu erwarten, dass Bauteiltoleranzen und Umgebungsbedingungen (z.B. Temperatur) eine Rolle spielen, müssen Potentiometer in der realen Schaltung vorgesehen werden um die diese Effekte zu kompensieren. Beim $U_{BE}$-Vervielfacher würde $R_{sq2}$ als Trimpotentiometer ausgeführt werden.\n Weiters ist zu beachten, dass für einen realen Aufbau Widerstandswerte aus den E-Reihen zu wählen sind!\n\n\n### Reale Spannungsquelle in der Schaltung {#sec-RealeVorspannung}\n\nDer zuvor dimensionierte $U_{BE}$-Vervielfacher kann nun in die Schaltung eingebaut werden. \n\n![Gegentaktendstufe mit realer Vorspannungsquelle ](Grafiken/04_LV_Reale_Vorspannung.png){#fig-BJT_GegenRueckVorReal} \n\nEs gilt aufs neue die Qualität zu überprüfen. Dabei werden die selben Parameter wie in @sec-LV_Vorspannen zur Beurteilung heran gezogen.\nZuerst wird wieder eine Operating Point Analyse (OP) durchgeführt um den Arbeitspunkt zu kontrollieren, @fig-BJT_GegenRueckVorReal3. Bereits hier ist zu erkennen, dass die gewünschte Vorspannung nicht erreicht wird.\n\n![Gegentaktendstufe mit realer Vorspannungsquelle, Simulation 1 ](Grafiken/04_LV_Reale_VorspannungDCSim1.png){#fig-BJT_GegenRueckVorReal3}\n\n![Gegentaktendstufe mit realer Vorspannungsquelle, Transienten Simulation ](Grafiken/04_LV_Reale_VorspannungTRANSim1.png){#fig-BJT_GegenRueckVorReal4}\n\n| Simulationsparameter | Wert | Bemerkung |\n|----------------------|:-------:|:------:|\n| $V_{in}$ Frequenz         | 10 kHz  |        |   \n| $V_{in}$ Amplitude        | 1 V     |        |  \n| Simulierte Perioden  | 3       |        |  \n\nIn der Simulation über die Zeit, der Transientensimulation, sind auch eindeutig die Übergabeverzerrungen zu sehen. DEr Grund dafür liegt in der fehlenden Stromversorgung der Spannungsquelle.\n\n::: {.callout-note}\nWelche noch Kostengünstigere Variante zur Realisierung der Vorspannung mit Dioden gibt es? Welchen Nachteile hat diese Lösung? \nWarum wird nicht einfach eine Stromquelle mit einem Widerstand zur Vorspannung genutzt?\n:::\n\n## Stromversorgung\nWie in @sec-RealeVorspannung Simulationsergebnis @fig-BJT_GegenRueckVorReal3 und @fig-BJT_GegenRueckVorReal4 sichtbar ist, fehlt für die reale Vorspannungsquelle noch die Stromversorgung.\n<!-- ![Gegentaktendstufe mit Stromversorgung der Vorspannungsquelle](Grafiken/05_LV_Stromquellen.png){#fig-BJT_GegenRueckVorRealStrom} -->\n\n![Gegentaktendstufe mit Stromversorgung, Simulation 1 ](Grafiken/05_LV_StromquellenDCSim1.png){#fig-BJT_GegenRueckVorRealStromDCSim1}  \n\nMittels Arbeitspunktsimulation ist zu sehen, dass die Vorspannung durch, den einbau der Stromquellen erreicht wird. Die Höhe des Stromes richtet sich nach der Dimensionierung von $I_{spqg}$ in @sec-ube_verf_bere. \n\n![Gegentaktendstufe mit Stromversorgung, Transienten Simulation](Grafiken/05_LV_StromquellenTRANSim1.png){#fig-BJT_GegenRueckVorRealStromTRANSim1}  \n\n| Simulationsparameter | Wert | Bemerkung |\n|----------------------|:-------:|:------:|\n| $V_{in}$ Frequenz         | 10 kHz  |        |   \n| $V_{in}$ Amplitude        | 1 V     |        |  \n| Simulierte Perioden  | 5       |        |  \n\nDie Verzerrungen sind wieder auf dem Niveau aus @sec-LV_Vorspannen und damit akzeptabel. Nun müssen nur noch die idealen Stromquellen mit realen ersetzt werden.\n\n## Reale Stromquelle\nAls geeignete Stromquellen bietet sich der sogenannte Stromspiegel an. Dieser kann wieder Analytisch berechnet werden nach [@boehmer17, pp. 157] oder mittels DC-Sweeps des Widerstandes bestimmt werden. Zur Simulation eignen sich als Last Spannungsgesteuerte Spannungsquellen. \n\n![Gegentaktendstufe mit realen Stromquellen, Simulation 1 ](Grafiken/05.01_RealeStromquellenOPSim1.png){#fig-BJT_GegenRueckVorRealStromOPSim1}  \n\nDie Stabilität der Stromquelle kann ermittelt werden indem die Lastspannung \"gesweept\" wird. Dabei soll der Verlauf des Stromes möglichst horizontal, konstant, sein.\n\n![Gegentaktendstufe mit realen Stromquellen, DC Sweep ](Grafiken/05.01_RealeStromquelleDCSim1.png){#fig-BJT_GegenRueckVorRealStromDCsweepSim1}  \n\nNachdem die ausreichende Stabilität gezeigt wurde können die Stromquellen eingebaut werden und die gesamte Schaltung auf ihre Qualität überprüft werden. \n\n![Gegentaktendstufe mit realen Stromquellen, Arbeitspunktanalyse ](Grafiken/06_LV_Real.png){#fig-BJT_06_LV_Real}  \n\n\n![Gegentaktendstufe mit realen Stromquellen, Transienten Analyse ](Grafiken/06_LV_Real_TRANSim1.png){#fig-BJT_06_LV_Real_TRANSim1}  \n\n| Simulationsparameter | Wert | Bemerkung |\n|----------------------|:-------:|:------:|\n| $V_{in}$ Frequenz         | 10 kHz  |        |   \n| $V_{in}$ Amplitude        | 1 V     |        |  \n| Simulierte Perioden  | 5       |        |  \n\nVergleicht man nun Ergebnis @fig-BJT_GegenRueckVorSim1, bei welchem die Vorspannung ideal ausgeführt wurde und das Ergebnis @fig-BJT_06_LV_Real_TRANSim1 mit realen, und damit tatsächlich fertigbar, Quellen ist die Qualitätsunterschied zu vernachlässigen. Das Schaltung gilt damit als fertig dimensioniert. Natürlich kann die Schaltung erweitert, adaptiert und verbessert werden. Siehe dazu @sec-AbwErw.\n\n\n\n## Praktische Herangehensweise\n* welche Last muss versorgt werden.\n* welche Lastströme sind gewünscht.\n* Auswahl passender Transistoren in Bezug auf die maximale Werte.\n* Definition der Qualitätsparameter, z.B. Differenz der ein und Ausgangspannungen, Oberwellen Anteile, ...\n\n## Abwandlungen und Erweiterungen {#sec-AbwErw}\nWie könnte eine Strombegrenzung, Kurzschlusssicherheit, umgesetzt werden?  \nWie könnte die Rückkopplung die hier mit einem OPV umgesetzt wurde noch realisiert werden? <!-- Differenzverstärker -->  \nWie könnte die Vorspannung mit Dioden umgesetzt werden?  \nWie könnte die Leistung weiter erhöht werden? <!-- Darlingtontransistoren -->\n\n",
    "supporting": [
      "04.01_Leistungsverstaerker_files"
    ],
    "filters": [],
    "includes": {}
  }
}