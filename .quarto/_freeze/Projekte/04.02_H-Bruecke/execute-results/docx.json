{
  "hash": "c35d579c97f4a44e34106d2383a34212",
  "result": {
    "markdown": "# H-Brücke {#sec-H-Bruecke}  \n\n::: {.cell execution_count=1}\n``` {.python .cell-code code-fold=\"true\"}\n#import sys\n# adding Folder_2 to the system path\n#sys.path.insert(0, '../../../Common/QuartoBookHelpers')\n#import QuartoBookHelpers\n\nfrom IPython.display import Markdown, Latex\n\nfrom sympy import *\nimport sympy.physics.units as u\nimport numpy as np\nfrom matplotlib import pyplot as plt\nfrom quantiphy import Quantity\nimport re\n\nclass MySymbol(Symbol):\n    def __new__(cls, name, description='',unit='',value=''):\n        obj = Symbol.__new__(cls, name)\n        obj.description = description\n        obj.unit = unit\n        obj.value = value\n        \n        return obj\n\nclass MyFunction(Function):\n    def __new__(cls, name, description='',unit='',value=''):\n        obj = Function.__new__(cls, name)\n        obj.description = description\n        obj.unit = unit\n        obj.value = value\n        \n        return obj\n        \nclass QBookHelpers():\n    def print_description(dic):\n        for vari in dic:\n            display(Markdown(f'${latex(vari)}$' + ' ... ' + vari.description))\n            \n    def print_equation(eq,**kwargs):\n        #print(kwargs)\n        if kwargs != {}:\n            label = kwargs['label']\n            #print(label)\n            display(Markdown(f'$$\\n{latex(eq)}\\n$${{#' + label + f'}}'))\n        else:      \n            display(Markdown(f'$$\\n{latex(eq)}\\n$${{#eq-Dummy}}'))\n            \n    def print_values(dic,**kwargs):\n        for vari in dic:\n            try:\n                QuantValue = Quantity(vari.value,str(vari.unit.abbrev))\n            except:\n                QuantValue = Quantity(vari.value)\n            \n            quant_string = QuantValue.render(prec=2)\n            val = quant_string.split(' ')[0]\n            if quant_string[-1].isdigit():\n                uni = ''\n            else:\n                try:\n                    uni = quant_string.split(' ')[1]\n                except:\n                    uni = quant_string[-1]\n            #print(re.split('(\\d+)',QuantValue.render(prec=2)))\n            #uni = re.split('(\\d+)',QuantValue.render(prec=2))[-1]\n            #uni = ''\n            #val = re.split('(\\d+)',QuantValue.render(prec=2))[1]\n            #val = QuantValue.render(prec=2)\n\n            if uni.find('ohm') >=0:\n                uni = '\\ \\mathrm{' + uni.replace('ohm','\\Omega') + '}'\n                disp_string = f'$${latex(vari)}' + ' = ' + latex(val) + ' ' + str(uni) + f'$$' \n            else:\n                disp_string = f'$${latex(vari)}' + ' = ' + latex(val) + ' \\ ' + latex(uni) + f'$$' \n            \n            if kwargs != {}:\n                label = kwargs['label']\n                disp_string = disp_string + f'{{#' + label + f'}}'\n\n            \n            display(Markdown(disp_string))\n\n            #display(Markdown(f'${latex(vari)}$' + ' = ' + str(vari.value) + f'$\\ {latex(vari.unit)}$' ))            \n            #display(Markdown(f'${latex(vari)}$' + ' = ' + str(\"%.2f\" % round(vari.value, 2)) + f'$\\ {latex(vari.unit)}$' ))\n            #display(Markdown(f'$${latex(vari)}' + ' = ' + latex(QuantValue.render()) + f'$$' ))\n            #display(Markdown(f'$${latex(vari)}' + ' = ' + latex(quant) + f'$$' ))\n            #display(Markdown(f'$${latex(vari)}' + ' = ' + str(vari.value) + f'\\ {latex(vari.unit)}$$' ))\n\n            \n    def calculate_num_value(eqn):\n        replacement = {}\n        for sym in eqn.rhs.free_symbols:\n            case = {sym:sym.value}\n            replacement.update(case)\n        #print(replacement)\n        #return Eq(eqn.lhs,eqn.rhs.evalf(subs=replacement))\n        eqn.lhs.value = eqn.rhs.evalf(subs=replacement)\n        #display(eqn.lhs.value)\n\n    def logic_parser(eqn):\n        return str(eqn).replace('&','and').replace('|','or').replace('~','not')\n\n```\n:::\n\n\nDer Markt für DC-Motoren belief sich im Jahr 2022 auf ca. 20,1 Milliarden US-Dollar und es wurde erwartet, dass sich das Volumen bis 2031 auf 49,3 Milliarden erhöht [@DC-Motor_Market]. Jeder dieser Motoren braucht eine mehr oder weniger komplizierte Ansteuerung. Eine mögliche Ansteuerung soll hier gezeigt werden.\n\n**Ziel**  \nEs soll eine Schaltung entworfen werden welche es erlaubt, einen DC-Motor in folgenden Betriebsarten zu betreiben:  \n\n* Linkslauf  \n* Rechtslauf   \n* Bremsen  \n\nBei den ersten beiden Punkten soll es Möglich sein, die Drehzahl mittels *Puls-Weiten-Modulation* (PWM) zu ändern.\n\n**Lernziele**  \n  \n* Strukturiertes aufbereiten einer Aufgabenstellung  \n* Auslegung von digitalen Schaltungen  \n* Plausibilität und Qualitätsbeurteilung mittels Simulation  \n* Hierarchisches Design in Schaltplänen\n* Strukturiertes, zeitoptimiertes Dokumentieren der Arbeit  \n\n**Hilfestellung**  \n\n[Hierarchisches Design](https://htlanichstrasse.sharepoint.com/:v:/s/HWE_G1_GoetL_4CHEL_2324/EZasQb_YxYJFhKNIHozMHHEBL6wJfvGr8gDUHmqqvegymg?e=bt8iiY&nav=eyJyZWZlcnJhbEluZm8iOnsicmVmZXJyYWxBcHAiOiJTdHJlYW1XZWJBcHAiLCJyZWZlcnJhbFZpZXciOiJTaGFyZURpYWxvZy1MaW5rIiwicmVmZXJyYWxBcHBQbGF0Zm9ybSI6IldlYiIsInJlZmVycmFsTW9kZSI6InZpZXcifX0%3D)\n\n## Beschreibung der H-Brücke  \n\nIm einfachsten Fall wird die Stromversorgung, welche eine entsprechende Leistung hat, mit einem Schalter eingeschaltet und der Motor dreht sich. Um einen Motor drehzahlgesteuert zu betreiben, bedarf es ein Steuersignal und der entsprechenden Leistung für den Motor. In den meisten Fällen ist es so, dass das Steuersignal selbst nicht ausreichend Leistung hat, da es aus einem Mikrocontroller kommt.  \nMit Schaltung @fig-n-Channel_switch kann ein Motor drehzahlgesteuert betrieben werden. Der MOSFET verstärkt dabei die Leistung des Steuersignales. Die Leistung wird von der Quelle $U_q$ zur Verfügung gestellt. Allerdings lässt sich dabei die Drehrichtung nicht ändern.  \nUm die oben geforderten Betriebszustände zu erreichen, bedarf es der H-Brücke, auch Vier-Quadranten-Steller genannt, in @fig-H-Bruecke. Die punktiert umrandete Schaltung ist dabei das Ersatzschaltbild eines DC-Motors.\n\n![H-Brücke [@HBruecke] ](Grafiken/Hbruecke/Vierquadrantensteller.png){#fig-H-Bruecke}\n\n### Funktionsweise\nFür die Erklärung der Funktionsweise werden die MOSFET's durch gedachte Schalter ersetzt. Dies ist Zulässig, da der MOSFET als Schalter betrieben werden kann. Siehe dazu @sec-MOSFET. \n\n![Ersatzschaltbild H-Brücke mit Schaltern ](Grafiken/Hbruecke/MitSchaltern.png){#fig-H-BrueckeMS}\n\n$S_1, S_2, S_ 3$ und $S_4$ stellen dabei Potentiale dar. Zur Erinnerung, ein MOSFET schaltet wenn die Spannung zwischen Gate und Source, $U_{GS}$, die Threshold-Spannung $U_{GS,Threshold}$ überschreitet. In Bild @fig-H-BrueckeMS sind alle Schalter offen. Da es sich um N-Kanal Selbstsperrende MOSFET handelt müssen, für diesen Zustand, alle Potentiale, $S_1$ bis $S_4$, $0 \\ \\mathrm{V}$ sein.\n\nDer Trick ist, den Stromfluss durch den Motor für Rechtslauf und Linkslauf umzukehren. Dies gelingt wie folgt.\n\n#### Linkslauf\n\n![Ersatzschaltbild H-Brücke mit Schaltern, Linkslauf ](Grafiken/Hbruecke/MitSchalternLL.png){#fig-H-BrueckeMSLL}\n\nPotential $S_2$ und $S_3$ müssen auf HIGH sein. Potential $S_1$ und $S_4$ müssen auf LOW sein.\n\n\n#### Rechtslauf\n\n![Ersatzschaltbild H-Brücke mit Schaltern, Rechtslauf ](Grafiken/Hbruecke/MitSchalternRL.png){#fig-H-BrueckeMSRL}\n\nPotential $S_1$ und $S_4$ müssen auf HIGH sein. Potential $S_2$ und $S_3$ müssen auf LOW sein.\n\n#### Bremsen  \n\nUm den Motor zu bremsen muss er Kurzgeschlossen werden. Daraus ergibt sich, dass Potential $S_2$ und $S_4$ auf HIGH sind und Potential $S_1$ und $S_3$  auf LOW sind.\n\n![Ersatzschaltbild H-Brücke mit Schaltern, Bremsen ](Grafiken/Hbruecke/MitSchalternBremse.png){#fig-H-BrueckeMSBremse}\n\n\n## Entwicklung der Logik\nZunächst muss in der Zuordnungstabelle der Zusammenhang zwischen dem logischen Zustand und dem physikalischen Wert definiert werden.\n\n|Eingang / Ausgang|Bezeichnung|Zuordnung|Beschreibung|\n|:----|:----|:----|:----|\n|Eingang|E ... Enable|0 … Disabled;  1 … Enabled|Damit wird die Schaltung Betriebsbereit, Ist Enable deaktiviert kann an den anderen Eingängen ein beliebiges Signal anliegen, der Motor darf sich trotzdem nicht bewegen.|\n|Eingang|B ... Break|0 … Disabled; 1 … Enabled|Aktivierung des Bremsbetriebs. Hat Vorrang über die Richtungswahl.|\n|Eingang|D ... Direction|0 … Linkslauf; 1 … Rechtslauf|Gibt die Drehrichtung vor.|\n|Eingang|P ... PWM|PWM Signal|Gibt die Drehzahl vor.|\n|Ausgänge|S1, S2, S3, S4|0 … MOSFET aus; 1 … MOSFET ein|PWM Signal für die Transistoren.|\n\n: Zuordnungstabelle {#tbl-Zuordnung}  \n\nIn der Wahrheitstabelle wird nun der Schaltzustand der Ausgänge in Abhängigkeit der Eingänge definiert.  \n\n::: {#tbl-wahrheitstabelle .cell tbl-cap='Wahrheitstabelle' execution_count=2}\n\n::: {.cell-output .cell-output-display}\n|   PWM |   Enable |   Direction |   Break |   S1 |   S2 |   S3 |   S4 |\n|-------|----------|-------------|---------|------|------|------|------|\n| 0     | 0        | 0           | 0       | 0    | 0    |    0 |    0 |\n| 0     | 0        | 0           | 1       | 0    | 0    |    0 |    0 |\n| 0     | 0        | 1           | 0       | 0    | 0    |    0 |    0 |\n| 0     | 0        | 1           | 1       | 0    | 0    |    0 |    0 |\n| 0     | 1        | 0           | 0       | 0    | 0    |    0 |    0 |\n| 0     | 1        | 0           | 1       | 0    | 1    |    0 |    1 |\n| 0     | 1        | 1           | 0       | 0    | 0    |    0 |    0 |\n| 0     | 1        | 1           | 1       | 0    | 1    |    0 |    1 |\n| 1     | 0        | 0           | 0       | 0    | 0    |    0 |    0 |\n| 1     | 0        | 0           | 1       | 0    | 0    |    0 |    0 |\n| 1     | 0        | 1           | 0       | 0    | 0    |    0 |    0 |\n| 1     | 0        | 1           | 1       | 0    | 0    |    0 |    0 |\n| 1     | 1        | 0           | 0       | 0    | 1    |    1 |    0 |\n| 1     | 1        | 0           | 1       | 0    | 1    |    0 |    1 |\n| 1     | 1        | 1           | 0       | 1    | 0    |    0 |    1 |\n| 1     | 1        | 1           | 1       | 0    | 1    |    0 |    1 |\n:::\n:::\n\n\nMittels KV-Diagram oder Boolescher Algebra kann aus der Wahrheitstabelle die einfachste Boolesche Gleichung Form ermittelt werden. Da die Logik sehr einfach ist kann das Ergebnis auch direkt aus der Wahrheitstabelle abgelesen werden.\n\n::: {.cell execution_count=3}\n\n::: {.cell-output .cell-output-display}\n$\\displaystyle S_{1} = B \\wedge E \\wedge P \\wedge \\neg D$\n:::\n\n::: {.cell-output .cell-output-display}\n$\\displaystyle S_{2} = E \\wedge \\left(D \\vee P\\right) \\wedge \\left(D \\vee \\neg B\\right)$\n:::\n\n::: {.cell-output .cell-output-display}\n$\\displaystyle S_{3} = E \\wedge P \\wedge \\neg B \\wedge \\neg D$\n:::\n\n::: {.cell-output .cell-output-display}\n$\\displaystyle S_{4} = E \\wedge \\left(B \\vee D\\right) \\wedge \\left(D \\vee P\\right)$\n:::\n:::\n\n\nAus den Gleichungen können nun die Schaltungen gezeichnet werden.\n\n<!--\n\n::: {#fig-schaltungs1 .cell tbl-cap='Logik Schaltung für Steuersignal S1' execution_count=4}\n\n::: {.cell-output .cell-output-display}\n![](04.02_H-Bruecke_files/figure-docx/fig-schaltungs1-output-1.svg){#fig-schaltungs1-1}\n:::\n\n::: {.cell-output .cell-output-display}\n![](04.02_H-Bruecke_files/figure-docx/fig-schaltungs1-output-2.svg){#fig-schaltungs1-2}\n:::\n\n::: {.cell-output .cell-output-display}\n![](04.02_H-Bruecke_files/figure-docx/fig-schaltungs1-output-3.svg){#fig-schaltungs1-3}\n:::\n\n::: {.cell-output .cell-output-display}\n![](04.02_H-Bruecke_files/figure-docx/fig-schaltungs1-output-4.svg){#fig-schaltungs1-4}\n:::\n:::\n\n\n-->\n\n",
    "supporting": [
      "04.02_H-Bruecke_files\\figure-docx"
    ],
    "filters": []
  }
}